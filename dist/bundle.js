(()=>{var e={5867:(e,t,r)=>{const o=r(3392);addCalendar=(e,t,r,a,n)=>new Promise(((s,d)=>{if(!(e&&t&&r&&a&&n))return d("No se ha recibido todos los datos"),!1;const i={dayText:e,dayCelebrate:t,isCelebrated:r,description:a,categoryId:n};o.addCalendar(i),s(i)})),getCalendar=e=>new Promise(((t,r)=>{t(o.getCalendar(e))})),updateCalendar=(e,t,r,a,n,s)=>new Promise((async(d,i)=>{if(!(e&&t&&r&&a&&n&&s))return i("No se ha recibido todos los datos"),!1;d(await o.updateCalendar(e,t,r,a,n,s))})),deleteCalendar=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteCalendar(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addCalendar,getCalendar,updateCalendar,deleteCalendar}},2009:(e,t,r)=>{const o=r(5619),a=o.Schema,n=new a({dayText:{type:String,required:!0},dayCelebrate:{type:String,required:!0},isCelebrated:{type:String,required:!0},description:{type:String,defaul:""},categoryId:{type:a.Types.ObjectId,ref:"category"}},{collection:"calendar"});e.exports=o.model("calendar",n)},1955:(e,t,r)=>{const o=r(2127).Router(),a=r(5867),n=r(5628);o.post("/",((e,t)=>{a.addCalendar(e.body.dayText,e.body.dayCelebrate,e.body.isCelebrated,e.body.description,e.body.categoryId).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idCalendar||null;a.getCalendar(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateCalendar(e.params.id,e.body.dayText,e.body.dayCelebrate,e.body.isCelebrated,e.body.description,e.body.categoryId).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteCalendar(r).then((()=>{n.success(e,t,`Calendario ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},3392:(e,t,r)=>{const o=r(2009);r(9043).Connect(),addCalendar=e=>{new o(e).save()},getCalendar=async e=>{let t={};return null!=e&&{_id:e},await o.find().select({_id:0,dayText:1}).populate({path:"categoryId",select:"colorPosition imageUrl"})},updateCalendar=async(e,t,r,a,n,s)=>{const d=await o.findOne({_id:e});return d.dayText=t,d.dayCelebrate=r,d.isCelebrated=a,d.description=n,d.categoryId=s,await d.save()},deleteCalendar=e=>o.deleteOne({_id:e}),e.exports={addCalendar,getCalendar,updateCalendar,deleteCalendar}},1987:(e,t,r)=>{const o=r(3267);addCategory=(e,t,r)=>new Promise(((a,n)=>{if(!e||!t||!r)return n("No se ha recibido todos los datos"),!1;const s={name:e,colorPosition:t,imageUrl:r};o.addCategory(s),a(s)})),getCategory=e=>new Promise(((t,r)=>{t(o.getCategory(e))})),updateCategory=(e,t,r,a)=>new Promise((async(n,s)=>{if(!t||!r||!a)return s("No se ha recibido todos los datos"),!1;n(await o.updateCategory(e,t,r,a))})),deleteCategory=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteCategory(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addCategory,getCategory,updateCategory,deleteCategory}},3238:(e,t,r)=>{const o=r(5619),a=new(0,o.Schema)({name:{type:String,required:!0},colorPosition:{type:Array,required:!0},imageUrl:{type:String,defaul:""}},{collection:"category"});e.exports=o.model("category",a)},116:(e,t,r)=>{const o=r(2127).Router(),a=r(1987),n=r(5628);o.post("/",((e,t)=>{a.addCategory(e.body.name,e.body.colorPosition,e.body.imageUrl).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.name||null;a.getCategory(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateCategory(e.params.id,e.body.name,e.body.colorPosition,e.body.imageUrl).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteCategory(r).then((()=>{n.success(e,t,`Categoria ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},3267:(e,t,r)=>{const o=r(3238);r(9043).Connect(),addCategory=e=>{new o(e).save()},getCategory=async e=>{let t={};return null!=e&&(t={name:e}),await o.find(t)},updateCategory=async(e,t,r,a)=>{const n=await o.findOne({_id:e});return n.name=t,n.colorPosition=r,n.imageUrl=a,await n.save()},deleteCategory=e=>o.deleteOne({_id:e}),e.exports={addCategory,getCategory,updateCategory,deleteCategory}},8643:(e,t,r)=>{const o=r(9383);addChallengeUser=(e,t)=>new Promise(((r,a)=>{if(!e||!t)return a("No se ha recibido todos los datos"),!1;const n={challengeId:e,userId:t};o.addChallengeUser(n),r(n)})),getChallengeUser=e=>new Promise(((t,r)=>{t(o.getChallengeUser(e))})),updateChallengeUser=(e,t,r)=>new Promise((async(a,n)=>{if(!e||!t||!r)return n("No se ha recibido todos los datos"),!1;a(await o.updateChallengeUser(e,t,r))})),deleteChallengeUser=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteChallengeUser(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addChallengeUser,getChallengeUser,updateChallengeUser,deleteChallengeUser}},6466:(e,t,r)=>{const o=r(5619),a=o.Schema,n=new a({challengeId:{type:a.Types.ObjectId,required:!0,ref:"challenge"},userId:{type:a.Types.ObjectId,required:!0,ref:"user"},statusChallenge:{type:Number,required:!1,default:0},imageUrl:{type:String,required:!1,default:""}},{collection:"challengeUser"});e.exports=o.model("challengeUser",n)},810:(e,t,r)=>{const o=r(2127).Router(),a=r(8643),n=r(5628);o.post("/",((e,t)=>{a.addChallengeUser(e.body.challengeId,e.body.userId).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idChallengeUser||null;a.getChallengeUser(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateChallengeUser(e.params.id,e.body.challengeId,e.body.userId).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteChallengeUser(r).then((()=>{n.success(e,t,`ChallengeUserio ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},9383:(e,t,r)=>{const o=r(6466);r(9043).Connect(),addChallengeUser=e=>{new o(e).save()},getChallengeUser=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateChallengeUser=async(e,t,r)=>{const a=await o.findOne({_id:e});return a.challengeId=t,a.userId=r,await a.save()},deleteChallengeUser=e=>o.deleteOne({_id:e}),e.exports={addChallengeUser,getChallengeUser,updateChallengeUser,deleteChallengeUser}},7788:(e,t,r)=>{const o=r(5181);addChallenge=(e,t,r,a,n)=>new Promise(((s,d)=>{if(!(e&&t&&r&&a&&n))return d("No se ha recibido todos los datos"),!1;let i=r.slice(0,49);r.length>=50&&(i=`${i}...`);const c={name:e,categoryId:t,description:r,shortDescription:i,reward:a,ambientalImpact:n};o.addChallenge(c),s(c)})),getChallenge=e=>new Promise(((t,r)=>{t(o.getChallenge(e))})),updateChallenge=(e,t,r,a,n,s)=>new Promise((async(d,i)=>{if(!(e&&t&&r&&a&&n&&s))return i("No se ha recibido todos los datos"),!1;let c=a.slice(0,49);a.length>=50&&(c=`${c}...`),d(await o.updateChallenge(e,t,r,a,c,n,s))})),deleteChallenge=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteChallenge(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addChallenge,getChallenge,updateChallenge,deleteChallenge}},8366:(e,t,r)=>{const o=r(5619),a=o.Schema,n=new a({name:{type:String,required:!0},categoryId:{type:a.Types.ObjectId,ref:"category"},description:{type:String,required:!0},shortDescription:{type:String,required:!1},reward:{experiencie:{type:Number,required:!0},coint:{type:Number,required:!0}},ambientalImpact:{type:String,required:!0},isCompleted:{type:Boolean,default:!1}},{collection:"challenge"});e.exports=o.model("challenge",n)},9737:(e,t,r)=>{const o=r(2127).Router(),a=r(7788),n=r(5628);o.post("/",((e,t)=>{a.addChallenge(e.body.name,e.body.categoryId,e.body.description,e.body.reward,e.body.ambientalImpact).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idChallenge||null;a.getChallenge(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateChallenge(e.params.id,e.body.name,e.body.categoryId,e.body.description,e.body.reward,e.body.ambientalImpact).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteChallenge(r).then((()=>{n.success(e,t,`Challengeio ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},5181:(e,t,r)=>{const o=r(8366);r(9043).Connect(),addChallenge=e=>{new o(e).save()},getChallenge=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateChallenge=async(e,t,r,a,n,s,d)=>{const i=await o.findOne({_id:e});return i.name=t,i.categoryId=r,i.description=a,i.shortDescription=n,i.reward=s,i.ambientalImpact=d,await i.save()},deleteChallenge=e=>o.deleteOne({_id:e}),e.exports={addChallenge,getChallenge,updateChallenge,deleteChallenge}},1020:(e,t,r)=>{const o=r(3035);addConfiguration=(e,t,r)=>new Promise(((a,n)=>{if(!e||!t||!r)return n("No se ha recibido todos los datos"),!1;const s={dailyActivity:e,socialLinks:t,Links:r};o.addConfiguration(s),a(s)})),getConfiguration=e=>new Promise(((t,r)=>{t(o.getConfiguration(e))})),updateConfiguration=(e,t,r,a)=>new Promise((async(n,s)=>{if(!(e&&t&&r&&a))return s("No se ha recibido todos los datos"),!1;n(await o.updateConfiguration(e,t,r,a))})),deleteConfiguration=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteConfiguration(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addConfiguration,getConfiguration,updateConfiguration,deleteConfiguration}},5948:(e,t,r)=>{const o=r(5619),a=new(0,o.Schema)({dailyActivity:{type:Number,required:!0,default:0},socialLinks:{facebook:{type:String,required:!1},instagram:{type:String,required:!1}},Links:{privacyPolicies:{type:String,required:!1},termsAndConditions:{type:String,required:!1},suport:{type:String,required:!1}}},{collection:"configuration"});e.exports=o.model("configuration",a)},7499:(e,t,r)=>{const o=r(2127).Router(),a=r(1020),n=r(5628);o.post("/",((e,t)=>{a.addConfiguration(e.body.dailyActivity,e.body.socialLinks,e.body.Links).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idConfiguration||null;a.getConfiguration(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateConfiguration(e.params.id,e.body.dailyActivity,e.body.socialLinks,e.body.Links).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteConfiguration(r).then((()=>{n.success(e,t,`Configuration ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},3035:(e,t,r)=>{const o=r(5948);r(9043).Connect(),addConfiguration=e=>{new o(e).save()},getConfiguration=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateConfiguration=async(e,t,r,a)=>{const n=await o.findOne({_id:e});return n.dailyActivity=t,n.socialLinks=r,n.Links=a,await n.save()},deleteConfiguration=e=>o.deleteOne({_id:e}),e.exports={addConfiguration,getConfiguration,updateConfiguration,deleteConfiguration}},5155:(e,t,r)=>{const o=r(7952);addCourse=(e,t,r)=>new Promise(((a,n)=>{if(!e||!t||!r)return n("No se ha recibido todos los datos"),!1;const s={name:e,description:t,categoryId:r};o.addCourse(s),a(s)})),getCourse=e=>new Promise(((t,r)=>{t(o.getCourse(e))})),updateCourse=(e,t,r,a)=>new Promise((async(n,s)=>{if(!(e&&t&&r&&a))return s("No se ha recibido todos los datos"),!1;n(await o.updateCourse(e,t,r,a))})),deleteCourse=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteCourse(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addCourse,getCourse,updateCourse,deleteCourse}},3402:(e,t,r)=>{const o=r(5619),a=o.Schema,n=new a({name:{type:String,required:!0},description:{type:String,required:!0},categoryId:{type:a.Types.ObjectId,ref:"category"}},{collection:"course"});e.exports=o.model("course",n)},9668:(e,t,r)=>{const o=r(2127).Router(),a=r(5155),n=r(5628);o.post("/",((e,t)=>{a.addCourse(e.body.name,e.body.description,e.body.categoryId).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idCourse||null;a.getCourse(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateCourse(e.params.id,e.body.name,e.body.description,e.body.categoryId).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteCourse(r).then((()=>{n.success(e,t,`Curso ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},7952:(e,t,r)=>{const o=r(3402);r(9043).Connect(),addCourse=e=>{new o(e).save()},getCourse=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateCourse=async(e,t,r,a)=>{const n=await o.findOne({_id:e});return n.name=t,n.description=r,n.categoryId=a,await n.save()},deleteCourse=e=>o.deleteOne({_id:e}),e.exports={addCourse,getCourse,updateCourse,deleteCourse}},8705:(e,t,r)=>{const o=r(3499);addFunFactsUser=(e,t)=>new Promise(((r,a)=>{if(!e||!t)return a("No se ha recibido todos los datos"),!1;const n={userId:e,funFactsId:t};o.addFunFactsUser(n),r(n)})),getFunFactsUser=e=>new Promise(((t,r)=>{t(o.getFunFactsUser(e))})),updateFunFactsUser=(e,t,r)=>new Promise((async(a,n)=>{if(!t||!r)return n("No se ha recibido todos los datos"),!1;a(await o.updateFunFactsUser(e,t,r))})),deleteFunFactsUser=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteFunFactsUser(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addFunFactsUser,getFunFactsUser,updateFunFactsUser,deleteFunFactsUser}},2692:(e,t,r)=>{const o=r(5619),a=o.Schema,n=new a({userId:{type:a.Types.ObjectId,ref:"user"},funFactsId:{type:a.Types.ObjectId,ref:"funFacts"}},{collection:"funFactsUser"});e.exports=o.model("funFactsUser",n)},3815:(e,t,r)=>{const o=r(2127).Router(),a=r(8705),n=r(5628);o.post("/",((e,t)=>{a.addFunFactsUser(e.body.userId,e.body.funFactsId).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idFunFactsUser||null;a.getFunFactsUser(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateFunFactsUser(e.params.id,e.body.userId,e.body.funFactsId).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteFunFactsUser(r).then((()=>{n.success(e,t,`FunFactsUserio ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},3499:(e,t,r)=>{const o=r(2692);r(9043).Connect(),addFunFactsUser=e=>{new o(e).save()},getFunFactsUser=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateFunFactsUser=async(e,t,r)=>{const a=await o.findOne({_id:e});return a.userId=t,a.funFactsId=r,await a.save()},deleteFunFactsUser=e=>o.deleteOne({_id:e}),e.exports={addFunFactsUser,getFunFactsUser,updateFunFactsUser,deleteFunFactsUser}},256:(e,t,r)=>{const o=r(4328);addFunFacts=e=>new Promise(((t,r)=>{if(!e)return r("No se ha recibido todos los datos"),!1;const a={content:e};o.addFunFacts(a),t(a)})),getFunFacts=e=>new Promise(((t,r)=>{t(o.getFunFacts(e))})),updateFunFacts=(e,t)=>new Promise((async(r,a)=>{if(!e||!t)return a("No se ha recibido todos los datos"),!1;r(await o.updateFunFacts(e,t))})),deleteFunFacts=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteFunFacts(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addFunFacts,getFunFacts,updateFunFacts,deleteFunFacts}},4742:(e,t,r)=>{const o=r(5619),a=new(0,o.Schema)({content:{type:String,required:!0}},{collection:"funFacts"});e.exports=o.model("funFacts",a)},1900:(e,t,r)=>{const o=r(2127).Router(),a=r(256),n=r(5628);o.post("/",((e,t)=>{a.addFunFacts(e.body.content).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idFunFacts||null;a.getFunFacts(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateFunFacts(e.params.id,e.body.content).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteFunFacts(r).then((()=>{n.success(e,t,`funFactsio ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},4328:(e,t,r)=>{const o=r(4742);r(9043).Connect(),addFunFacts=e=>{new o(e).save()},getFunFacts=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateFunFacts=async(e,t)=>{const r=await o.findOne({_id:e});return r.content=t,await r.save()},deleteFunFacts=e=>o.deleteOne({_id:e}),e.exports={addFunFacts,getFunFacts,updateFunFacts,deleteFunFacts}},1958:(e,t,r)=>{const o=r(3687);getData=e=>new Promise(((t,r)=>{t(o.getData(e))})),e.exports={getData}},513:(e,t,r)=>{const o=r(2127).Router(),a=r(1958),n=r(5628);o.get("/",((e,t)=>{const r=e.body.email||null;r?a.getData(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)})):n.error(e,t,"No se ha recibido el email",500,"No se ha recibido el email")})),e.exports=o},3687:(e,t,r)=>{const o=r(9043),a=r(6115),n=r(3402),s=r(1962),d=r(6466),i=r(4742),c=r(2692),l=r(8366),u=r(756),p=r(3238),g=r(2009),h=r(2143),y=r(5013),m=r(8479),w=r(5948),C=r(5750);o.Connect(),getData=async e=>{null!=e&&(filter={email:e});const t=await a.findOne(filter).select({_id:1,names:1,birdOfDate:1,coint:1,experience:1,imageUrl:1});let r;r=await y.find({userId:t._id}).populate({path:"itemId",select:"title description urlImage"});const o=await i.find(),f=await c.find({userId:t._id});let b=[];o.map((e=>{b.push(e._id.toString())}));let I=[];f.map((e=>{I.push(e.funFactsId.toString())}));var F=b.filter((e=>!I.includes(e)));const U=F.length;let S,x;if(console.log(`solo me quedan ${U} funfact para mostrar`),0!=U){do{S=getRandomInt(0,U)}while(S==U);const e=F[S];x=await i.findOne({_id:e})}else x={};const{isBirthday:E,edad:q}=C.getAge(t.birdOfDate);let N=[],T=[],D={path:"categoryId",select:"colorPosition imageUrl"};const P=await s.find({userId:t._id});let _=[];if(P.map((e=>{_.push(e.topics.toString())})),console.log(_),q<15){N=await n.find().populate(D);let e=[],t={};for(let r=0;r<N.length;r++)e=await h.find({courseId:N[r]._id}),e.map(((t,r)=>{_.map((o=>{if(t._id==o){let t=e[r];console.log(`hay ${r+1} temas que ya has completado`),t={reward:t.reward,content:t.content,answers:t.answers,isCompleted:!0,_id:t._id,name:t.name,courseId:t.courseId,question:t.question,correctAnswer:t.correctAnswer,imageTopic:t.imageTopic},e.splice(r,1),e.splice(r,0,t)}}))})),t={_id:N[r]._id,name:N[r].name,description:N[r].description,categoryId:N[r].categoryId,topic:e},T.push(t)}else{const e=await d.find({userId:t._id});let r=[];e.map((e=>{r.push(e.challengeId.toString())})),challenges=await l.find();const o=[];challenges.map((e=>{o.includes(e.categoryId.toString())||o.push(e.categoryId.toString())}));let a={};for(let e=0;e<o.length;e++){categoryChallenge=await p.find({_id:o[e]}).select({_id:1,name:1,colorPosition:1,imageUrl:1}),challenge=await l.find({categoryId:o[e]}).select({_id:1,name:1,description:1,shortDescription:1,ambientalImpact:1,reward:1,isCompleted:1});let t=0;challenge.map(((e,o)=>{r.map((r=>{if(e._id==r){let e=challenge[o];t+=1,e={_id:e._id,name:e.name,description:e.description,shortDescription:e.shortDescription,ambientalImpact:e.ambientalImpact,reward:e.reward,isCompleted:!0},challenge.splice(o,1),challenge.splice(o,0,e)}}))})),console.log(`hay ${t} temas que ya has completado`),a={_id:categoryChallenge[0]._id,name:categoryChallenge[0].name,categoryId:{colorPosition:categoryChallenge[0].colorPosition,imageUrl:categoryChallenge[0].imageUrl},challenge},T.push(a)}}const O=await u.find(),v=await g.find().populate(D),A=await m.find().sort([["datePublished",-1]]),B=await w.find();return{user:{_id:t._id,names:t.names,birdOfDate:t.birdOfDate,age:q,isBirthday:E,imageUrl:t.imageUrl,experience:t.experience,coint:t.coint},content:T,storeItem:O,calendar:v,news:A,configuration:B,yourShopping:r,funFacts:x}},getRandomInt=(e,t)=>Math.floor(Math.random()*(t-e))+e,e.exports={getData}},4221:(e,t,r)=>{const o=r(8716),a=r(3691);addNews=(e,t,r,n,s)=>new Promise(((d,i)=>{if(!e||!t||!r)return i("No se ha recibido todos los datos"),!1;const c=a.getFullDate();console.log(c);let l=t.slice(0,49);t.length>=50&&(l=`${l}...`);const u={title:e,description:t,shortDescription:l,datePublished:c,imageUrl:r,nameButton:n,linkButton:s};o.addNews(u),d(u)})),getNews=e=>new Promise(((t,r)=>{t(o.getNews(e))})),updateNews=(e,t,r,n)=>new Promise((async(s,d)=>{if(!(e&&t&&r&&n))return d("No se ha recibido todos los datos"),!1;const i=a.getDate();let c=r.slice(0,49);r.length>=50&&(c=`${c}...`),s(await o.updateNews(e,t,r,c,i,n))})),deleteNews=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteNews(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addNews,getNews,updateNews,deleteNews}},8479:(e,t,r)=>{const o=r(5619),a=new(0,o.Schema)({title:{type:String,required:!0},description:{type:String,required:!0},shortDescription:{type:String,required:!1},datePublished:{type:String,required:!1},imageUrl:{type:String,default:""},nameButton:{type:String,default:""},linkButton:{type:String,default:""}},{collection:"news"});e.exports=o.model("news",a)},3009:(e,t,r)=>{const o=r(2127).Router(),a=r(4221),n=r(5628);o.post("/",((e,t)=>{a.addNews(e.body.title,e.body.description,e.body.imageUrl,e.body.nameButton,e.body.linkButton).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idNews||null;a.getNews(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateNews(e.params.id,e.body.title,e.body.description,e.body.imageUrl).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteNews(r).then((()=>{n.success(e,t,`News ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},8716:(e,t,r)=>{const o=r(8479);r(9043).Connect(),addNews=e=>{new o(e).save()},getNews=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateNews=async(e,t,r,a,n,s)=>{const d=await o.findOne({_id:e});return d.title=t,d.description=r,d.shortDescription=a,d.datePublished=n,d.imageUrl=s,await d.save()},deleteNews=e=>o.deleteOne({_id:e}),e.exports={addNews,getNews,updateNews,deleteNews}},3127:(e,t,r)=>{const o=r(8572);addStoreItem=(e,t,r,a)=>new Promise(((n,s)=>{if(!(e&&t&&r&&a))return s("No se ha recibido todos los datos"),!1;const d={title:e,description:t,price:r,urlImage:a};o.addStoreItem(d),n(d)})),getStoreItem=e=>new Promise(((t,r)=>{t(o.getStoreItem(e))})),updateStoreItem=(e,t,r,a,n)=>new Promise((async(s,d)=>{if(!(e&&t&&r&&a&&n))return d("No se ha recibido todos los datos"),!1;s(await o.updateStoreItem(e,t,r,a,n))})),deleteStoreItem=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteStoreItem(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addStoreItem,getStoreItem,updateStoreItem,deleteStoreItem}},756:(e,t,r)=>{const o=r(5619),a=new(0,o.Schema)({title:{type:String,required:!0},description:{type:String,required:!0},price:{type:Number,required:!0},urlImage:{type:String,required:!0,default:String}},{collection:"storeItem"});e.exports=o.model("storeItem",a)},6173:(e,t,r)=>{const o=r(2127).Router(),a=r(3127),n=r(5628);o.post("/",((e,t)=>{a.addStoreItem(e.body.title,e.body.description,e.body.price,e.body.urlImage).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idStoreItem||null;a.getStoreItem(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateStoreItem(e.params.id,e.body.title,e.body.description,e.body.price,e.body.urlImage).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteStoreItem(r).then((()=>{n.success(e,t,`storeItem ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},8572:(e,t,r)=>{const o=r(756);r(9043).Connect(),addStoreItem=e=>{new o(e).save()},getStoreItem=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateStoreItem=async(e,t,r,a,n)=>{const s=await o.findOne({_id:e});return s.title=t,s.description=r,s.price=a,s.urlImage=n,await s.save()},deleteStoreItem=e=>o.deleteOne({_id:e}),e.exports={addStoreItem,getStoreItem,updateStoreItem,deleteStoreItem}},3084:(e,t,r)=>{const o=r(3893);addTopicsUser=(e,t)=>new Promise(((r,a)=>{if(!e||!t)return a("No se ha recibido todos los datos"),!1;const n={userId:e,topics:t};o.addTopicsUser(n),r(n)})),getTopicsUser=e=>new Promise(((t,r)=>{t(o.getTopicsUser(e))})),updateTopicsUser=(e,t,r,a)=>new Promise((async(n,s)=>{if(!(e&&t&&r&&a))return s("No se ha recibido todos los datos"),!1;n(await o.updateTopicsUser(e,t,r,a))})),deleteTopicsUser=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteTopicsUser(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addTopicsUser,getTopicsUser,updateTopicsUser,deleteTopicsUser}},1962:(e,t,r)=>{const o=r(5619),a=o.Schema,n=new a({userId:{type:a.Types.ObjectId,ref:"user",required:!0},topics:{type:a.Types.ObjectId,ref:"topics",required:!0}},{collection:"topicsUser"});e.exports=o.model("topicsUser",n)},3155:(e,t,r)=>{const o=r(2127).Router(),a=r(3084),n=r(5628);o.post("/",((e,t)=>{a.addTopicsUser(e.body.userId,e.body.topics).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idTopicsUser||null;a.getTopicsUser(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateTopicsUser(e.params.id,e.body.userId,e.body.topics,e.body.status).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteTopicsUser(r).then((()=>{n.success(e,t,`TopicsUser ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},3893:(e,t,r)=>{const o=r(1962);r(9043).Connect(),addTopicsUser=e=>{new o(e).save()},getTopicsUser=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateTopicsUser=async(e,t,r,a)=>{const n=await o.findOne({_id:e});return n.userId=t,n.topics=r,n.status=a,await n.save()},deleteTopicsUser=e=>o.deleteOne({_id:e}),e.exports={addTopicsUser,getTopicsUser,updateTopicsUser,deleteTopicsUser}},5599:(e,t,r)=>{const o=r(9757);addTopics=(e,t,r,a,n,s,d,i)=>new Promise(((c,l)=>{if(!(e&&t&&r&&a&&n&&s&&d&&i))return l("No se ha recibido todos los datos"),!1;const u={name:e,content:t,courseId:r,question:a,answers:n,correctAnswer:s,reward:d,imageTopic:i};o.addTopics(u),c(u)})),getTopics=e=>new Promise(((t,r)=>{t(o.getTopics(e))})),updateTopics=(e,t,r,a,n,s,d,i)=>new Promise((async(c,l)=>{if(!(e&&t&&r&&a&&n&&s&&d&&i))return l("No se ha recibido todos los datos"),!1;c(await o.updateTopics(e,t,r,a,n,s,d,i))})),deleteTopics=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteTopics(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addTopics,getTopics,updateTopics,deleteTopics}},2143:(e,t,r)=>{const o=r(5619),a=o.Schema,n=new a({name:{type:String,required:!0},content:{type:Array,required:!0},courseId:{type:a.Types.ObjectId,ref:"Course",required:!0},question:{type:String,required:!0},answers:{type:Array,required:!0},correctAnswer:{type:String,required:!0},reward:{experiencie:{type:Number,required:!0},coint:{type:Number,required:!0}},imageTopic:{type:String,required:!0},isCompleted:{type:Boolean,default:!1}},{collection:"topics"});e.exports=o.model("topics",n)},4674:(e,t,r)=>{const o=r(2127).Router(),a=r(5599),n=r(5628);o.post("/",((e,t)=>{a.addTopics(e.body.name,e.body.content,e.body.courseId,e.body.question,e.body.answers,e.body.correctAnswer,e.body.reward,e.body.imageTopic).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idTopics||null;a.getTopics(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateTopics(e.params.id,e.body.name,e.body.content,e.body.courseId,e.body.question,e.body.answers,e.body.correctAnswer,e.body.reward).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteTopics(r).then((()=>{n.success(e,t,`Topics ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},9757:(e,t,r)=>{const o=r(2143);r(9043).Connect(),addTopics=e=>{new o(e).save()},getTopics=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateTopics=async(e,t,r,a,n,s,d,i)=>{const c=await o.findOne({_id:e});return c.name=t,c.content=r,c.courseId=a,c.question=n,c.answers=s,c.correctAnswer=d,c.reward=i,await c.save()},deleteTopics=e=>o.deleteOne({_id:e}),e.exports={addTopics,getTopics,updateTopics,deleteTopics}},3812:(e,t,r)=>{const o=r(9763),a=r(3691),n=r(6115);addUser=(e,t,r,s,d,i)=>new Promise((async(c,l)=>{if(!(e&&t&&r&&s&&d&&i))return l("No se ha recibido todos los datos"),!1;filter={email:s};const u=await n.find(filter);if(console.log(u.length),u.length>=1)return void l("El usuario existente");const p=a.getDate(),g={numberID:e,names:t,birdOfDate:r,email:s,phone:d,password:i,registerOfDate:p};o.addUser(g),c(g)})),loginUser=(e,t)=>new Promise((async(r,a)=>{const s=await n.findOne({email:e});s?s.password==t?r(o.loginUser(e,t)):a("Contraseña incorrecta"):a("El usuario no existe")})),changePassword=(e,t,r)=>new Promise((async(a,s)=>{const d=await n.findOne({_id:e});d?d.password==t?a(await o.updatePassword(e,r)):s("Contraseña actual incorrecta"):s("El usuario no existe")})),changeCoint=(e,t)=>new Promise((async(r,a)=>{const s=await n.findOne({_id:e});console.log(s),s?r(await o.changeCoint(e,t)):a("El usuario no existe")})),changeExperience=(e,t)=>new Promise((async(r,a)=>{await n.findOne({_id:e})?r(await o.changeExperience(e,t)):a("El usuario no existe")})),changeReward=(e,t,r)=>new Promise((async(a,s)=>{await n.findOne({_id:e})?a(await o.changeReward(e,t,r)):s("El usuario no existe")})),updateUser=(e,t,r,a,n,s,d,i,c,l)=>new Promise((async(u,p)=>{if(!(e&&t&&r&&a&&n&&s&&d&&i&&c&&l))return p("No se ha recibido todos los datos"),!1;u(await o.updateUser(e,t,r,a,n,s,d,i,c,l))})),deleteUser=e=>new Promise(((t,r)=>{if(!e)return r("No se ha recibido el id del usuario"),!1;o.deleteUser(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addUser,loginUser,updateUser,deleteUser,changePassword,changeCoint,changeExperience,changeReward}},6115:(e,t,r)=>{const o=r(5619),a=new(0,o.Schema)({numberID:{type:String,required:!0},names:{type:String,required:!0},birdOfDate:{type:String,required:!0},email:{type:String,required:!0},phone:{type:String,required:!0},password:{type:String,required:!0},registerOfDate:{type:String,required:!0},coint:{type:Number,required:!1,default:0},experience:{type:Number,default:0},imageUrl:{type:String,default:""}},{collection:"user"});e.exports=o.model("user",a)},395:(e,t,r)=>{const o=r(2127).Router(),a=r(3812),n=r(5628);o.post("/",((e,t)=>{"4C79A286C3ADE40D27696F617F94D646B7A38236FF385DF962EFAA9755BB2CBD"==e.headers.token?a.addUser(e.body.idNumber,e.body.Names,e.body.dateOfBirth,e.body.Email,e.body.phone,e.body.password).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,r,500,r)})):n.error(e,t,"Acceso denegado",500,"La password de la req es incorrecta")})),o.post("/login",((e,t)=>{const{email:r,password:o}=e.body;"4C79A286C3ADE40D27696F617F94D646B7A38236FF385DF962EFAA9755BB2CBD"==e.headers.token?null!=r&&null!=o?a.loginUser(r,o).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,r,500,r)})):n.error(e,t,"Se necesita que se envie el correo y contraseña",500,"No se ha recibido las credenciales"):n.error(e,t,"Acceso denegado",500,"La password de la req es incorrecta")})),o.post("/changePassword",((e,t)=>{const{user:r,passwordActually:o,passwordNew:s}=e.body;"4C79A286C3ADE40D27696F617F94D646B7A38236FF385DF962EFAA9755BB2CBD"==e.headers.token?null!=r&&null!=o&&null!=s?a.changePassword(r,o,s).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,r,500,r),console.log("por aqui")})):n.error(e,t,"Se necesita que se envie el usuario y contraseña a actualizar",500,"No se ha recibido los datos"):n.error(e,t,"Acceso denegado",500,"La password de la req es incorrecta")})),o.post("/changeCoint",((e,t)=>{const{userId:r,newCoint:o}=e.body;"4C79A286C3ADE40D27696F617F94D646B7A38236FF385DF962EFAA9755BB2CBD"==e.headers.token?null!=r&&null!=o?a.changeCoint(r,o).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,r,500,r),console.log("por aqui")})):n.error(e,t,"Se necesita que se envie el userId y el newCoint para actualizar",500,"No se ha recibido los datos"):n.error(e,t,"Acceso denegado",500,"La password de la req es incorrecta")})),o.post("/changeExperience",((e,t)=>{const{userId:r,newExperience:o}=e.body;"4C79A286C3ADE40D27696F617F94D646B7A38236FF385DF962EFAA9755BB2CBD"==e.headers.token?null!=r&&null!=o?a.changeExperience(r,o).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,r,500,r),console.log("por aqui")})):n.error(e,t,"Se necesita que se envie el userId y el newExperience para actualizar",500,"No se ha recibido los datos"):n.error(e,t,"Acceso denegado",500,"La password de la req es incorrecta")})),o.post("/changeReward",((e,t)=>{const{userId:r,newCoint:o,newExperience:s}=e.body;"4C79A286C3ADE40D27696F617F94D646B7A38236FF385DF962EFAA9755BB2CBD"==e.headers.token?null!=r&&null!=o&&null!=s?a.changeReward(r,o,s).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,r,500,r),console.log("por aqui")})):n.error(e,t,"Se necesita que se envie el userId, newCoint y el newExperience para actualizar",500,"No se ha recibido los datos"):n.error(e,t,"Acceso denegado",500,"La password de la req es incorrecta")})),o.patch("/:id",((e,t)=>{a.updateUser(e.params.id,e.body.numberID,e.body.names,e.body.birdOfDate,e.body.email,e.body.phone,e.body.password,e.body.coint,e.body.experience,e.body.imageUrl).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteUser(r).then((()=>{n.success(e,t,`Usuario ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},9763:(e,t,r)=>{const o=r(6115),a=r(9043),n=r(3691),s=r(3687);a.Connect(),addUser=e=>{new o(e).save()},loginUser=async(e,t)=>{let r=!1;const a=await o.findOne({email:e});let n={};return console.log(a),a?(t===a.password&&(r=!0,n=s.getData(e)),n):r},updateUser=async(e,t,r,a,s,d,i,c,l,u)=>{const p=await o.findOne({_id:e}),g=n.getDate();return p.numberID=t,p.names=r,p.birdOfDate=a,p.email=s,p.phone=d,p.password=i,p.registerOfDate=g,p.coint=c,p.experience=l,p.imageUrl=u,await p.save()},updatePassword=async(e,t)=>{const r=await o.findOne({_id:e}),a=n.getDate();return r.password=t,r.registerOfDate=a,await r.save()},changeCoint=async(e,t)=>{const r=await o.findOne({_id:e});return r.coint=t,await r.save()},changeExperience=async(e,t)=>{const r=await o.findOne({_id:e});return r.experience=t,await r.save()},changeReward=async(e,t,r)=>{const a=await o.findOne({_id:e});return a.coint=t,a.experience=r,await a.save()},deleteUser=e=>o.deleteOne({_id:e}),e.exports={addUser,loginUser,updateUser,updatePassword,deleteUser,changeCoint,changeExperience,changeReward}},7509:(e,t,r)=>{const o=r(8999),a=r(3691),n=r(6115);addYourShopping=(e,t,r)=>new Promise((async(s,d)=>{if(!e||!t)return d("No se ha recibido todos los datos"),!1;const i=a.getDate(),c={itemId:e,userId:t,shoppingDate:i},l=await n.findOne({_id:t});l.coint=l.coint-r;const u=await l.save();console.log(u),o.addYourShopping(c),s(c)})),updateYourShopping=e=>new Promise((async(t,r)=>{if(!e)return r("No se ha recibido ningun id"),!1;const n=a.getDate();t(await o.updateYourShopping(e,n))})),deleteYourShopping=e=>new Promise(((t,r)=>{if(!e)return r("No se ha encontrado la categoria"),!1;o.deleteYourShopping(e).then((()=>{t()})).catch((e=>{r(e)}))})),e.exports={addYourShopping,getYourShopping,updateYourShopping,deleteYourShopping}},5013:(e,t,r)=>{const o=r(5619),a=o.Schema,n=new a({itemId:{type:a.Types.ObjectId,ref:"storeItem"},userId:{type:a.Types.ObjectId,ref:"user"},shoppingDate:{type:String,required:!0},deliveryDate:{type:String,required:!1,default:""},deliveryStatus:{type:Boolean,required:!1,default:!1}},{collection:"yourShopping"});e.exports=o.model("yourShopping",n)},9460:(e,t,r)=>{const o=r(2127).Router(),a=r(7509),n=r(5628);o.post("/",((e,t)=>{a.addYourShopping(e.body.itemId,e.body.userId,e.body.price).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.get("/",((e,t)=>{const r=e.query.idYourShopping||null;a.getYourShopping(r).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.patch("/:id",((e,t)=>{a.updateYourShopping(e.params.id).then((r=>{n.success(e,t,r,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),o.delete("/:id",((e,t)=>{let r=e.params.id;a.deleteYourShopping(r).then((()=>{n.success(e,t,`YourShoppingio ${r} Eliminado`,200)})).catch((r=>{n.error(e,t,"Error Interno",500,r)}))})),e.exports=o},8999:(e,t,r)=>{const o=r(5013);r(9043).Connect(),addYourShopping=e=>{new o(e).save()},getYourShopping=async e=>{let t={};return null!=e&&(t={_id:e}),await o.find(t)},updateYourShopping=async(e,t)=>{const r=await o.findOne({_id:e});return r.deliveryDate=t,r.deliveryStatus=!r.deliveryStatus,await r.save()},deleteYourShopping=e=>o.deleteOne({_id:e}),e.exports={addYourShopping,getYourShopping,updateYourShopping,deleteYourShopping}},9043:(e,t,r)=>{const o=r(5619);e.exports={Connect:()=>{try{o.Promise=r.g.Promise,o.connect("mongodb://localhost:27017/pachaapp",{useNewUrlParser:!0,useUnifiedTopology:!0})}catch(e){console.log("ocurrio un error: ",e)}},Close:function(){try{o.disconnect()}catch(e){console.log("ocurrio un error: ",e)}}}},5628:(e,t)=>{t.success=(e,t,r,o)=>{t.status(o||200).send({error:"",body:r})},t.error=(e,t,r,o,a)=>{console.error("[reponse error] ",a),t.status(o||500).send({error:r,body:""})}},5714:(e,t,r)=>{const o=r(116),a=r(395),n=r(1955),s=r(7499),d=r(3009),i=r(6173),c=r(9460),l=r(1900),u=r(9737),p=r(3815),g=r(810),h=r(9668),y=r(4674),m=r(3155),w=r(513);e.exports=e=>{e.use("/category",o),e.use("/user",a),e.use("/calendar",n),e.use("/configuration",s),e.use("/news",d),e.use("/storeItem",i),e.use("/yourShopping",c),e.use("/funFacts",l),e.use("/challenge",u),e.use("/funFactsUser",p),e.use("/challengeUser",g),e.use("/course",h),e.use("/topics",y),e.use("/topicsUser",m),e.use("/getData",w)}},5750:(e,t,r)=>{const o=r(3691);getAge=e=>{const t=o.getDate(),r=e.split("-"),a=t.split("-"),n=r[0],s=r[1],d=r[2],i=a[0],c=a[1];let l=a[2]-d,u=!1;return(c<s||c==s&&i<n)&&l--,c==s&&i==n&&(u=!0),{edad:l,isBirthday:u}},e.exports={getAge}},3691:e=>{getDate=()=>{const e=new Date;let t=e.getDate(),r=e.getMonth()+1;return t<=9&&(t=`0${t}`),r<=9&&(r=`0${r}`),`${t}-${r}-${e.getFullYear()}`},getFullDate=()=>{const e=new Date;let t=e.getDate(),r=e.getMonth()+1,o=e.getFullYear(),a=e.getHours(),n=e.getMinutes();return t<=9&&(t=`0${t}`),r<=9&&(r=`0${r}`),a<=9&&(a=`0${a}`),n<=9&&(n=`0${n}`),`${t}-${r}-${o} ${a}:${n}`},e.exports={getDate,getFullDate}},2127:e=>{"use strict";e.exports=require("express")},5747:e=>{"use strict";e.exports=require("fs")},7211:e=>{"use strict";e.exports=require("https")},5619:e=>{"use strict";e.exports=require("mongoose")},5622:e=>{"use strict";e.exports=require("path")}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{const e=r(2127),t=r(7211),o=r(5747),a=r(5714),n=r(5622);var s=e();const d={cert:o.readFileSync(n.resolve("./public.crt")),key:o.readFileSync(n.resolve("./private.key"))};s.use(e.json()),s.use(e.urlencoded({extended:!1})),s.use("/",e.static("./public")),a(s),t.createServer(d,s).listen(443),console.log("La aplicación esta escuchando en https://localhost:443")})()})();